server:
  port: 8080

spring:
  servlet:
    multipart:
      max-file-size: 5MB
      max-request-size: 5MB
  # 本地/线上切换：local | online
  profiles:
    active: online
  # 智能家居数据库（MySQL）
  datasource:
    url: jdbc:mysql://localhost:3306/ai_sql?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: root
    password: he0chuan
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    database-platform: org.hibernate.dialect.MySQLDialect

# 语音管道公共配置
voice:
  temp-dir: temp
  tts-dir: tts-output
  max-upload-size: 5242880
  mock: false
  rag-enabled: true
  rag-top-k: 5
  # RAG 最低相似度，低于此值的检索结果不进入上下文（避免“通义千问”命中“开灯”等无关文档）
  rag-min-score: 0.5
  vector-store-type: mysql

---
# 本地：DeepSeek-R1(vLLM) + qwen3-embedding(Ollama)；语音转文本/文本转语音 均用 PaddleSpeech（百度开源，pip/conda）
spring:
  config:
    activate:
      on-profile: local
voice:
  # PaddleSpeech：语音转文本(ASR) + 文本转语音(TTS)，需 Python 环境
  paddlespeech-cmd: paddlespeech
  vllm-base-url: http://localhost:8000
  vllm-model: deepseek-ai/DeepSeek-R1-Distill-Qwen-7B
  ollama-base-url: http://localhost:11434
  ollama-embedding-model: qwen3-embedding

---
# 线上：阿里云 语音转文本、文本转语音、向量模型、千问大模型
spring:
  config:
    activate:
      on-profile: online
voice:
  qwen-base-url: https://dashscope.aliyuncs.com/compatible-mode
  qwen-model: qwen-plus
  qwen-api-key: Bearer sk-e2a66dab1dd74a138c597955e9838e32
  embedding-model: text-embedding-v3
  embedding-dimensions: 1024
